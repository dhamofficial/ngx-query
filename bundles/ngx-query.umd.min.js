/**
 * ngx-query - a query panel for Angular 4+
 * @version v0.1.1
 * @author Joe Xue
 * @link https://github.com/xuemingfeng/ngx-query#readme
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/common","@angular/forms"],t):"object"==typeof exports?exports.ngxQuery=t(require("@angular/core"),require("@angular/common"),require("@angular/forms")):e.ngxQuery=t(e.ng.core,e.ng.common,e.ng.forms)}(this,function(e,t,n){return function(e){function t(l){if(n[l])return n[l].exports;var r=n[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.string="string"]="string",e[e.number="number"]="number",e[e.boolean="boolean"]="boolean",e[e.date="date"]="date",e[e.datetime="datetime"]="datetime",e[e.any="any"]="any"}(t.DataType||(t.DataType={}));!function(e){e[e.AND="and"]="AND",e[e.OR="or"]="OR"}(t.GroupOpType||(t.GroupOpType={}));!function(e){e[e.Equal="eq"]="Equal",e[e.NotEqual="ne"]="NotEqual",e[e.Less="lt"]="Less",e[e.LessOrEqual="le"]="LessOrEqual",e[e.Greater="gt"]="Greater",e[e.GreaterOrEqual="ge"]="GreaterOrEqual",e[e.BeginWith="bw"]="BeginWith",e[e.NotBeginWith="bn"]="NotBeginWith",e[e.EndWith="ew"]="EndWith",e[e.NotEndWith="en"]="NotEndWith",e[e.Contains="cn"]="Contains",e[e.NotContains="nc"]="NotContains",e[e.Between="bt"]="Between"}(t.FieldOpType||(t.FieldOpType={}));!function(e){e[e.plain="plain"]="plain",e[e.advanced="advanced"]="advanced"}(t.QueryMode||(t.QueryMode={}))},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(n,l){t(n,l,e)}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),p=n(8),u=function(){function e(e){this.defaultOptions=e,this.labels={buttons:{quick:"Quick",advanced:"Advanced",reset:"Reset",search:"Search"},groupOp:{and:"all",or:"any"},fieldOp:{eq:"equal",ne:"does not equal",lt:"less",le:"less or equal",gt:"greater",ge:"greater or equal",bw:"begins with",bn:"does not begin with",ew:"ends with",en:"does not end with",cn:"contains",nc:"does not contain",bt:"between"}},this.groupOps=[{key:o.GroupOpType.AND,label:this.labels.groupOp[o.GroupOpType.AND]},{key:o.GroupOpType.OR,label:this.labels.groupOp[o.GroupOpType.OR]}],this.dataTypeOps=[{dataType:o.DataType.any,ops:[{key:o.FieldOpType.Equal,label:this.labels.fieldOp[o.FieldOpType.Equal]},{key:o.FieldOpType.NotEqual,label:this.labels.fieldOp[o.FieldOpType.NotEqual]}]},{dataType:o.DataType.string,ops:[{key:o.FieldOpType.Equal,label:this.labels.fieldOp[o.FieldOpType.Equal]},{key:o.FieldOpType.NotEqual,label:this.labels.fieldOp[o.FieldOpType.NotEqual]},{key:o.FieldOpType.Contains,label:this.labels.fieldOp[o.FieldOpType.Contains]},{key:o.FieldOpType.NotContains,label:this.labels.fieldOp[o.FieldOpType.NotContains]},{key:o.FieldOpType.BeginWith,label:this.labels.fieldOp[o.FieldOpType.BeginWith]},{key:o.FieldOpType.NotBeginWith,label:this.labels.fieldOp[o.FieldOpType.NotBeginWith]},{key:o.FieldOpType.EndWith,label:this.labels.fieldOp[o.FieldOpType.EndWith]},{key:o.FieldOpType.NotEndWith,label:this.labels.fieldOp[o.FieldOpType.NotEndWith]}]},{dataType:o.DataType.number,ops:[{key:o.FieldOpType.Equal,label:this.labels.fieldOp[o.FieldOpType.Equal]},{key:o.FieldOpType.NotEqual,label:this.labels.fieldOp[o.FieldOpType.NotEqual]},{key:o.FieldOpType.Less,label:this.labels.fieldOp[o.FieldOpType.Less]},{key:o.FieldOpType.LessOrEqual,label:this.labels.fieldOp[o.FieldOpType.LessOrEqual]},{key:o.FieldOpType.Greater,label:this.labels.fieldOp[o.FieldOpType.Greater]},{key:o.FieldOpType.GreaterOrEqual,label:this.labels.fieldOp[o.FieldOpType.GreaterOrEqual]},{key:o.FieldOpType.Between,label:this.labels.fieldOp[o.FieldOpType.Between]}]},{dataType:o.DataType.date,ops:[{key:o.FieldOpType.Equal,label:this.labels.fieldOp[o.FieldOpType.Equal]},{key:o.FieldOpType.NotEqual,label:this.labels.fieldOp[o.FieldOpType.NotEqual]},{key:o.FieldOpType.Less,label:this.labels.fieldOp[o.FieldOpType.Less]},{key:o.FieldOpType.LessOrEqual,label:this.labels.fieldOp[o.FieldOpType.LessOrEqual]},{key:o.FieldOpType.Greater,label:this.labels.fieldOp[o.FieldOpType.Greater]},{key:o.FieldOpType.GreaterOrEqual,label:this.labels.fieldOp[o.FieldOpType.GreaterOrEqual]},{key:o.FieldOpType.Between,label:this.labels.fieldOp[o.FieldOpType.Between]}]},{dataType:o.DataType.datetime,ops:[{key:o.FieldOpType.Equal,label:this.labels.fieldOp[o.FieldOpType.Equal]},{key:o.FieldOpType.NotEqual,label:this.labels.fieldOp[o.FieldOpType.NotEqual]},{key:o.FieldOpType.Less,label:this.labels.fieldOp[o.FieldOpType.Less]},{key:o.FieldOpType.LessOrEqual,label:this.labels.fieldOp[o.FieldOpType.LessOrEqual]},{key:o.FieldOpType.Greater,label:this.labels.fieldOp[o.FieldOpType.Greater]},{key:o.FieldOpType.GreaterOrEqual,label:this.labels.fieldOp[o.FieldOpType.GreaterOrEqual]},{key:o.FieldOpType.Between,label:this.labels.fieldOp[o.FieldOpType.Between]}]},{dataType:o.DataType.boolean,ops:[{key:o.FieldOpType.Equal,label:this.labels.fieldOp[o.FieldOpType.Equal]},{key:o.FieldOpType.NotEqual,label:this.labels.fieldOp[o.FieldOpType.NotEqual]}]}],this.update(e)}return e.prototype.update=function(e){this.labels=Object.assign({},this.labels,e.labels);for(var t=0,n=this.groupOps;t<n.length;t++){var l=n[t];l.label=this.labels.groupOp[l.key]}for(var r=0,a=this.dataTypeOps;r<a.length;r++)for(var i=a[r],o=0,p=i.ops;o<p.length;o++){var u=p[o];u.label=this.labels.fieldOp[u.key]}},e}();u=l([i.Injectable(),a(0,i.Inject(p.QUERY_DEFAULTS)),r("design:paramtypes",[Object])],u),t.QueryConfigurationService=u},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=(n(1),function(){function e(e){this.template=e}return e}());l([a.Input(),r("design:type",Number)],i.prototype,"dataType",void 0),i=l([a.Directive({selector:"[ngx-query-value-input-template]"}),r("design:paramtypes",[a.TemplateRef])],i),t.ValueInputTemplateDirective=i},function(e,t,n){"use strict";function l(e,t){if(null!=e.rules)for(var n,r=0,a=e.rules;r<a.length;r++){var i=a[r];!function(e){if(void 0===e.datas&&(e.datas=[void 0,void 0],e.data&&(e.datas[0]=e.data)),e.datas&&(e.sdatas=e.datas),"string"==typeof e.field){if(void 0===(n=t.find(function(t){return t.name===e.field}))||null===n)throw new Error("Can't found out a field by name '"+e.field+"'.");e.field=n}}(i)}if(e.groups&&null!==e.groups)for(var o=0,p=e.groups;o<p.length;o++){var u=p[o];l(u,t)}}function r(e){var t={op:e.op,groups:[],rules:[]};if(e.rules&&e.rules.length>0)for(var n=0,l=e.rules;n<l.length;n++){var a=l[n];t.rules.push({field:a.field,op:a.op,data:a.data,datas:a.datas?a.datas.map(function(e){return e}):void 0})}if(e.groups&&e.groups.length>0)for(var i=0,o=e.groups;i<o.length;i++){var p=o[i];t.groups.push(r(p))}return t}function a(e){if(void 0!==e&&null!==e){var t={op:e.op,groups:[],rules:[]};if(e.rules&&e.rules.length>0)for(var n=0,l=e.rules;n<l.length;n++){var r=l[n],i={field:r.field.name,op:r.op,data:void 0,datas:void 0};r.datas&&("bt"===i.op?i.datas=r.datas:i.data=r.datas[0]),t.rules.push(i)}if(e.groups&&e.groups.length>0)for(var o=0,p=e.groups;o<p.length;o++){var u=p[o];t.groups.push(a(u))}return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.translateQueryGroup=l,t.cloneQueryGroup=r,t.generateQuery=a},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(4),o=function(){function e(){this.fields=[]}return Object.defineProperty(e.prototype,"queryTemplate",{get:function(){return this._queryTemplate},set:function(e){this._queryTemplate=e,this.tempQueryTemplate=i.cloneQueryGroup(this._queryTemplate),this._rules=this.getRules(this.tempQueryTemplate)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.queryTemplate=this._queryTemplate},e.prototype.getQuery=function(){return i.generateQuery(this.tempQueryTemplate)},e.prototype.getRules=function(e){var t=[];if(e.rules&&null!=e.rules&&e.rules.length>0&&(t=t.concat(e.rules)),e.groups&&null!=e.groups&&e.groups.length>0)for(var n=0,l=e.groups;n<l.length;n++){var r=l[n];t=t.concat(this.getRules(r))}return t},e}();l([a.Input(),r("design:type",Array)],o.prototype,"fields",void 0),l([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],o.prototype,"queryTemplate",null),o=l([a.Component({selector:"ngx-query-advanced",template:'\n  <div class="row">\n    <div class="form-horizontal">\n      <ngx-query-group [group]="tempQueryTemplate" [fields]="fields"></ngx-query-group>\n    </div>\n  </div>\n  '})],o),t.AdvancedComponent=o},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(3),p=function(){function e(){this.type=i.DataType.any}return e}();l([a.Input(),r("design:type",String)],p.prototype,"name",void 0),l([a.Input(),r("design:type",String)],p.prototype,"label",void 0),l([a.Input(),r("design:type",Number)],p.prototype,"type",void 0),l([a.Input(),r("design:type",Object)],p.prototype,"custom",void 0),l([a.Input(),a.ContentChild(o.ValueInputTemplateDirective,{read:a.TemplateRef}),r("design:type",a.TemplateRef)],p.prototype,"valueInputTemplate",void 0),p=l([a.Directive({selector:"ngx-query-field"})],p),t.FieldDirective=p},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(4),o=function(){function e(){}return Object.defineProperty(e.prototype,"queryTemplate",{get:function(){return this._queryTemplate},set:function(e){this._queryTemplate=e,this._tempQueryTemplate=i.cloneQueryGroup(this._queryTemplate),this.rules=this.getRules(this._tempQueryTemplate)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.queryTemplate=this._queryTemplate},e.prototype.getQuery=function(){return i.generateQuery(this._tempQueryTemplate)},e.prototype.getRules=function(e){var t=[];if(e.rules&&null!==e.rules&&e.rules.length>0&&(t=t.concat(e.rules)),e.groups&&null!==e.groups&&e.groups.length>0)for(var n=0,l=e.groups;n<l.length;n++){var r=l[n];t=t.concat(this.getRules(r))}return t},e}();l([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],o.prototype,"queryTemplate",null),o=l([a.Component({selector:"ngx-query-plain",template:'\n  <div class="row">\n    <div class="form-horizontal">\n      <div class="col-md-6" *ngFor="let rule of rules">\n        <div class="form-group">\n          <label class="col-lg-3 control-label">{{rule.field.label}}</label>\n          <div class="col-lg-9">\n            <ng-container *ngIf="rule.op!=\'bt\'" [ngTemplateOutlet]="rule.field.valueInputTemplate"\n              [ngOutletContext]="{rule:rule, dataIndex:0, custom: rule.field.custom}"></ng-container>\n            <ul class="list-inline ngx-query-list-inline" *ngIf="rule.op==\'bt\'">\n                <li><ng-container [ngTemplateOutlet]="rule.field.valueInputTemplate"\n                      [ngOutletContext]="{rule:rule, dataIndex:0, custom: rule.field.custom}">\n                    </ng-container>\n                </li>\n                <li><span>-</span></li>\n                <li><ng-container [ngTemplateOutlet]="rule.field.valueInputTemplate"\n                      [ngOutletContext]="{rule:rule, dataIndex:1, custom: rule.field.custom}">\n                    </ng-container>\n                </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  '})],o),t.PlainComponent=o},function(e,t,n){"use strict";function l(e){return void 0===e&&(e={}),{provide:t.QUERY_DEFAULTS,useValue:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.QUERY_DEFAULTS=new r.OpaqueToken("QUERY_DEFAULTS"),t.QueryDefaultsProvider=l},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(15),i=n(16),o=n(13),p=n(7),u=n(5),s=n(10),d=n(11),c=n(3),y=n(6),f=n(2),g=n(8),h=m=function(){function e(){}return e.forRoot=function(e){return{ngModule:m,providers:[g.QueryDefaultsProvider(e)]}},e}();h=m=l([r.NgModule({declarations:[o.QueryComponent,p.PlainComponent,u.AdvancedComponent,s.GroupComponent,d.RuleComponent,c.ValueInputTemplateDirective,y.FieldDirective],imports:[a.CommonModule,i.FormsModule],exports:[o.QueryComponent,c.ValueInputTemplateDirective,y.FieldDirective],providers:[f.QueryConfigurationService]})],h),t.NgxQueryModule=h;var m},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(2),p=function(){function e(e){this.config=e,this.fields=[],this.canRemove=!1,this.remove=new a.EventEmitter,this.groupOps=this.config.groupOps}return e.prototype.addGroup=function(){this.group.groups.push({op:i.GroupOpType.AND,groups:[],rules:[]})},e.prototype.addRule=function(){var e;this.fields.length>0&&(e=this.fields[0]),this.group.rules.push({op:"eq",field:e,data:"",datas:[]})},e.prototype.removeGroup=function(){this.remove.emit(this.group)},e.prototype.removeGroupItem=function(e){this.group.groups=this.group.groups.filter(function(t){return t!==e})},e}();l([a.Input(),r("design:type",Object)],p.prototype,"group",void 0),l([a.Input(),r("design:type",Array)],p.prototype,"fields",void 0),l([a.Input(),r("design:type",Boolean)],p.prototype,"canRemove",void 0),l([a.Output(),r("design:type",a.EventEmitter)],p.prototype,"remove",void 0),p=l([a.Component({selector:"ngx-query-group",template:'\n    <div class="col-md-12">\n        <div class="form-group">\n            <div class="col-md-3">\n                <div class="input-group">\n                    <div class="input-group-btn">\n                        <button type="button" class="btn btn-default"\n                            (click)="addGroup()"><i class="glyphicon glyphicon-plus"></i> {{\'{}\'}}</button>\n                        <button type="button" class="btn btn-default"\n                            (click)="addRule()"><i class="glyphicon glyphicon-plus"></i></button>\n                        <button type="button" class="btn btn-default" *ngIf="canRemove"\n                            (click)="removeGroup()"><i class="glyphicon glyphicon-minus"></i></button>\n                    </div>\n                    <select class="form-control" [(ngModel)]="group.op">\n                        <option *ngFor="let item of groupOps" [ngValue]="item.key">{{item.label}}</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div *ngIf="group.groups.length>0" class="col-md-12 ngx-query-group-children">\n        <ngx-query-group *ngFor="let group of group.groups" [group]="group"\n            [fields]="fields" [canRemove]="true" (remove)="removeGroupItem($event)">\n        </ngx-query-group>\n    </div>\n    <div *ngIf="group.rules.length>0" class="col-md-12 ngx-query-group-children">\n        <ngx-query-rule *ngFor="let rule of group.rules" [group]="group" [rule]="rule" [fields]="fields">\n        </ngx-query-rule>\n    </div>\n    ',styles:["\n    .ngx-query-group-children {\n        margin-left:20px;\n    }"]}),r("design:paramtypes",[o.QueryConfigurationService])],p),t.GroupComponent=p},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(2),p=function(){function e(e){this.config=e,this.fields=[],this.fieldOps=[]}return Object.defineProperty(e.prototype,"rule",{get:function(){return this._rule},set:function(e){this._rule=e,this.fieldChanged()},enumerable:!0,configurable:!0}),e.prototype.addRule=function(){var e;this.fields.length>0&&(e=this.fields[0]),this.group.rules.push({op:"eq",field:e,data:"",datas:[]})},e.prototype.removeRule=function(){var e=this;this.group.rules=this.group.rules.filter(function(t){return t!==e.rule})},e.prototype.fieldChanged=function(){var e=this;void 0===this._rule.datas&&(this._rule.datas=[void 0,void 0]);var t=this.rule.field.type||i.DataType.any,n=this.config.dataTypeOps.find(function(e){return e.dataType===t});n&&null!==n?(this.fieldOps=n.ops,this.fieldOps.length>0&&this.fieldOps.findIndex(function(t){return t.key===e.rule.op})<0&&(this.rule.op=this.fieldOps[0].key)):this.fieldOps=[]},e}();l([a.Input(),r("design:type",Array)],p.prototype,"fields",void 0),l([a.Input(),r("design:type",Object)],p.prototype,"group",void 0),l([a.Input(),r("design:type",Object),r("design:paramtypes",[Object])],p.prototype,"rule",null),p=l([a.Component({selector:"ngx-query-rule",template:'\n    <div class="col-md-12">\n        <div class="form-group">\n            <div class="col-md-3">\n                <div class="input-group">\n                    <div class="input-group-btn">\n                        <button type="button" class="btn btn-default"\n                            (click)="addRule()"><i class="glyphicon glyphicon-plus"></i></button>\n                        <button type="button" class="btn btn-default"\n                            (click)="removeRule()"><i class="glyphicon glyphicon-minus"></i></button>\n                    </div>\n                    <select class="form-control" [(ngModel)]="rule.field" (change)="fieldChanged()">\n                        <option *ngFor="let field of fields" [ngValue]="field" [innerHtml]="field.label"></option>\n                    </select>\n                </div>\n            </div>\n            <div class="col-md-2">\n                <select class="form-control" [(ngModel)]="rule.op">\n                    <option *ngFor="let item of fieldOps" [(ngValue)]="item.key" [innerHtml]="item.label"></option>\n                </select>\n            </div>\n            <div class="col-md-6">\n                <ng-container *ngIf="rule.op!=\'bt\'" [ngTemplateOutlet]="rule.field.valueInputTemplate"\n                    [ngOutletContext]="{rule:rule, dataIndex:0, custom: rule.field.custom}"></ng-container>\n                <ul class="list-inline ngx-query-list-inline" *ngIf="rule.op==\'bt\'">\n                    <li><ng-container [ngTemplateOutlet]="rule.field.valueInputTemplate"\n                            [ngOutletContext]="{rule:rule, dataIndex:0, custom: rule.field.custom}">\n                        </ng-container>\n                    </li>\n                    <li><span>-</span></li>\n                    <li><ng-container [ngTemplateOutlet]="rule.field.valueInputTemplate"\n                            [ngOutletContext]="{rule:rule, dataIndex:1, custom: rule.field.custom}">\n                        </ng-container>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n    ',styles:["\n        .ngx-query-list-inline{\n            margin-bottom: 0;\n        }\n    "]}),r("design:paramtypes",[o.QueryConfigurationService])],p),t.RuleComponent=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(9))},function(e,t,n){"use strict";var l=this&&this.__decorate||function(e,t,n,l){var r,a=arguments.length,i=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,n):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,l);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),o=n(3),p=n(6),u=n(14),s=n(4),d=n(7),c=n(5),y=n(2),f=function(){function e(e){this.config=e,this.query=new a.EventEmitter,this.mode=i.QueryMode.plain,this._queryTemplates=[]}return Object.defineProperty(e.prototype,"fieldTemplates",{get:function(){return this._fieldTemplates},set:function(e){if(this._fieldTemplates=e,e){var t=e.toArray();t.length&&(this.fields=u.translateTemplates(t),this._queryTemplates&&(this.queryTemplates=this._queryTemplates))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this.tempFields},set:function(e){this.translateFields(e,this._valueInputTemplates),this.tempFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queryTemplates",{get:function(){return this._queryTemplates},set:function(e){var t=this;this._queryTemplates=e,this._queryTemplates.forEach(function(e){t.translateQueryGroup(e.template,t.tempFields)}),this.queryTemplateChanged(this._queryTemplates[0])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultValueInputTemplates",{set:function(e){this._valueInputTemplates=e,this.translateFields(this.tempFields,this._valueInputTemplates)},enumerable:!0,configurable:!0}),e.prototype.getQuery=function(){var e;if(this.mode===i.QueryMode.plain)e=this._plainQuery.getQuery();else{if(this.mode!==i.QueryMode.advanced)throw new Error("Not implement the mode '"+this.mode+"'.");e=this._advancedQuery.getQuery()}return e},e.prototype.showPlainPanel=function(){this.mode=i.QueryMode.plain},e.prototype.showAdvancedPanel=function(){this.mode=i.QueryMode.advanced},e.prototype.queryTemplateChanged=function(e){this.currentQueryTemplate=e},e.prototype.resetQueryTemplate=function(){this.mode===i.QueryMode.plain&&this._plainQuery.reset(),this.mode===i.QueryMode.advanced&&this._advancedQuery.reset()},e.prototype.executeQuery=function(){var e=this.getQuery();this.query.emit(e)},e.prototype.translateFields=function(e,t){e&&e.length>0&&t&&t.length>0&&u.translateFields(e,t)},e.prototype.translateQueryGroup=function(e,t){t&&null!==t&&t.length>0&&null!==e&&s.translateQueryGroup(e,t)},e}();l([a.Output(),r("design:type",a.EventEmitter)],f.prototype,"query",void 0),l([a.Input(),r("design:type",String)],f.prototype,"title",void 0),l([a.Input(),r("design:type",Number)],f.prototype,"mode",void 0),l([a.ContentChildren(p.FieldDirective),r("design:type",a.QueryList),r("design:paramtypes",[a.QueryList])],f.prototype,"fieldTemplates",null),l([a.Input(),r("design:type",Array),r("design:paramtypes",[Array])],f.prototype,"fields",null),l([a.Input(),r("design:type",Array),r("design:paramtypes",[Array])],f.prototype,"queryTemplates",null),l([a.ViewChild(d.PlainComponent),r("design:type",d.PlainComponent)],f.prototype,"_plainQuery",void 0),l([a.ViewChild(c.AdvancedComponent),r("design:type",c.AdvancedComponent)],f.prototype,"_advancedQuery",void 0),l([a.ViewChildren(o.ValueInputTemplateDirective),r("design:type",Array),r("design:paramtypes",[Array])],f.prototype,"defaultValueInputTemplates",null),f=l([a.Component({selector:"ngx-query",template:'\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <div class="pull-left">\n        <h3 class="panel-title">{{title}}</h3>\n      </div>\n      <div class="btn-toolbar pull-right">\n\n        <div class="btn-group btn-group-xs" *ngIf="queryTemplates.length>1">\n          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n            <i class="glyphicon glyphicon-retweet"></i> {{currentQueryTemplate.name}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu">\n            <li *ngFor="let item of queryTemplates"><a href="javascript:" (click)="queryTemplateChanged(item)">{{item.name}}</a></li>\n          </ul>\n        </div>\n\n        <div class="btn-group  btn-group-xs">\n          <button type="button" class="btn" (click)="showPlainPanel()"\n            [ngClass]="{\'btn-primary\': mode==\'plain\', \'btn-default\': mode!=\'plain\'}">\n            <i class="glyphicon glyphicon-filter"></i> {{config.labels.buttons.quick}}</button>\n          <button type="button" class="btn" (click)="showAdvancedPanel()"\n            [ngClass]="{\'btn-primary\': mode==\'advanced\', \'btn-default\': mode!=\'advanced\'}">\n            <i class="glyphicon glyphicon-fire"></i> {{config.labels.buttons.advanced}}</button>\n        </div>\n\n        <div class="btn-group btn-group-xs">\n          <button type="button" class="btn btn-default" (click)="resetQueryTemplate()">\n            <i class="glyphicon glyphicon-repeat"></i> {{config.labels.buttons.reset}}</button>\n          <button type="button" class="btn btn-primary" (click)="executeQuery()">\n            <i class="glyphicon glyphicon-search"></i> {{config.labels.buttons.search}}</button>\n        </div>\n\n      </div>\n      <div class="clearfix"></div>\n    </div>\n    <div class="panel-body">\n      <ngx-query-plain [class.hide]="mode!=\'plain\'" #planQuery\n        [queryTemplate]="currentQueryTemplate.template">\n      </ngx-query-plain>\n      <ngx-query-advanced [class.hide]="mode!=\'advanced\'" #advancedQuery\n        [queryTemplate]="currentQueryTemplate.template" [fields]="tempFields">\n      </ngx-query-advanced>\n    </div>\n  </div>\n\n  \x3c!-- Value Input Templates --\x3e\n  <ng-template ngx-query-value-input-template dataType="any" let-rule="rule" let-dataIndex="dataIndex">\n    <input type="text" class="form-control" [placeholder]="rule.field.label" [(ngModel)]="rule.datas[dataIndex]" />\n  </ng-template>\n  <ng-template ngx-query-value-input-template dataType="string" let-rule="rule" let-dataIndex="dataIndex">\n    <input type="text" class="form-control" [placeholder]="rule.field.label" [(ngModel)]="rule.datas[dataIndex]" />\n  </ng-template>\n  <ng-template ngx-query-value-input-template dataType="boolean" let-rule="rule" let-dataIndex="dataIndex">\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" [placeholder]="rule.field.label" [(ngModel)]="rule.datas[dataIndex]" />\n      </label>\n    </div>\n  </ng-template>\n  <ng-template ngx-query-value-input-template dataType="number" let-rule="rule" let-dataIndex="dataIndex">\n    <input type="number" class="form-control" [placeholder]="rule.field.label" [(ngModel)]="rule.datas[dataIndex]" />\n  </ng-template>\n  <ng-template ngx-query-value-input-template  dataType="date" let-rule="rule" let-dataIndex="dataIndex">\n    <input type="date" class="form-control" [placeholder]="rule.field.label" [(ngModel)]="rule.datas[dataIndex]" />\n  </ng-template>\n  <ng-template ngx-query-value-input-template dataType="datetime" let-rule="rule" let-dataIndex="dataIndex">\n    <input type="date" class="form-control" [placeholder]="rule.field.label" [(ngModel)]="rule.datas[dataIndex]" />\n  </ng-template>\n  \x3c!-- Value Input Templates --\x3e\n  ',encapsulation:a.ViewEncapsulation.None,host:{class:"ngx-query"}}),r("design:paramtypes",[y.QueryConfigurationService])],f),t.QueryComponent=f},function(e,t,n){"use strict";function l(e){for(var t=[],n=0,l=e;n<l.length;n++){for(var r=l[n],a={},i=Object.getOwnPropertyNames(r),o=0,p=i;o<p.length;o++){var u=p[o];a[u]=r[u]}r.valueInputTemplate&&(a.valueInputTemplate=r.valueInputTemplate),t.push(a)}return t}function r(e,t){for(var n=0,l=e;n<l.length;n++){a(l[n],t)}}function a(e,t){if(void 0!==e.type&&null!==e.type||(e.type=i.DataType.any),void 0!==e.label&&null!==e.label||(e.label=e.name),void 0===e.valueInputTemplate||null===e.valueInputTemplate){var n=t.find(function(t){return t.dataType===e.type});if(void 0===n||null===n)throw new Error("Can't fount out a template by type '"+e.type+"'.");e.valueInputTemplate=n.template}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.translateTemplates=l,t.translateFields=r,t.translateField=a},function(e,n){e.exports=t},function(e,t){e.exports=n}])});
//# sourceMappingURL=ngx-query.umd.min.js.map